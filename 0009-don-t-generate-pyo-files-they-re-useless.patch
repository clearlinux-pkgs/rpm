From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Arjan van de Ven <arjan@linux.intel.com>
Date: Sat, 18 Jul 2015 19:52:12 -0400
Subject: [PATCH] don't generate pyo files, they're useless

Signed-off-by: Thiago Macieira <thiago.macieira@intel.com>
---
 scripts/brp-python-bytecompile | 21 +++++++++++----------
 scripts/brp-python-hardlink    |  2 ++
 2 files changed, 13 insertions(+), 10 deletions(-)

diff --git a/scripts/brp-python-bytecompile b/scripts/brp-python-bytecompile
index 39fca60..5a8a4a7 100644
--- a/scripts/brp-python-bytecompile
+++ b/scripts/brp-python-bytecompile
@@ -48,11 +48,11 @@ do
 	fi
 
 	# Generate optimized (.pyo) byte-compiled files.
-	$python_binary -O -c 'import compileall, sys; sys.exit(not compileall.compile_dir("'"$python_libdir"'", '"$depth"', "'"$real_libdir"'", force=1, quiet=1))'
-	if [ $? -ne 0 -a 0$errors_terminate -ne 0 ]; then
-		# One or more of the files had a syntax error
-		exit 1
-	fi
+	#$python_binary -O -c 'import compileall, sys; sys.exit(not compileall.compile_dir("'"$python_libdir"'", '"$depth"', "'"$real_libdir"'", force=1, quiet=1))'
+	#if [ $? -ne 0 -a 0$errors_terminate -ne 0 ]; then
+	#	# One or more of the files had a syntax error
+	#	exit 1
+	#fi
 done
 
 
@@ -67,9 +67,10 @@ if [ $? -ne 0 -a 0$errors_terminate -ne 0 ]; then
 fi
 
 # Generate optimized (.pyo) byte-compiled files.
-$default_python -O -c 'import compileall, re, sys; sys.exit(not compileall.compile_dir("'"$RPM_BUILD_ROOT"'", '"$depth"', "/", 1, re.compile(r"'"/bin/|/sbin/|/usr/lib(64)?/python[0-9]\.[0-9]"'"), quiet=1))' > /dev/null
-if [ $? -ne 0 -a 0$errors_terminate -ne 0 ]; then
-	# One or more of the files had a syntax error
-	exit 1
-fi
+#$python2 --c 'import compileall, re, sys; sys.exit(not compileall.compile_dir("'"$RPM_BUILD_ROOT"'", '"$depth"', "/", 1, re.compile(r"'"/bin/|/sbin/|/usr/lib(64)?/python2[0-9]\.[0-9]"'"), quiet=1))' > /dev/null
+#$python3 --c 'import compileall, re, sys; sys.exit(not compileall.compile_dir("'"$RPM_BUILD_ROOT"'", '"$depth"', "/", 1, re.compile(r"'"/bin/|/sbin/|/usr/lib(64)?/python3[0-9]\.[0-9]"'"), quiet=1))' > /dev/null
+#if [ $? -ne 0 -a 0$errors_terminate -ne 0 ]; then
+#	# One or more of the files had a syntax error
+#	exit 1
+#fi
 exit 0
diff --git a/scripts/brp-python-hardlink b/scripts/brp-python-hardlink
index f887199..cad1be4 100755
--- a/scripts/brp-python-hardlink
+++ b/scripts/brp-python-hardlink
@@ -5,6 +5,8 @@ if [ -z "$RPM_BUILD_ROOT" -o "$RPM_BUILD_ROOT" = "/" ]; then
 	exit 0
 fi
 
+exit 0
+
 # Hardlink identical *.pyc and *.pyo, originally from PLD's rpm-build-macros
 # Modified to use sha1sum instead of cmp to avoid a diffutils dependency.
 find "$RPM_BUILD_ROOT" -type f -name "*.pyc" | while read pyc ; do
